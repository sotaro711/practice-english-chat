# データベースセットアップ手順

## 🚨 現在の状況

- プロファイル情報取得で停止する問題が発生
- プロファイルテーブルが作成されていない可能性が高い

## ✅ 解決手順

### 1. Supabase でデータベースセットアップを実行

1. **Supabase Dashboard**を開く: https://supabase.com/dashboard
2. プロジェクト `sqebedvlhtopzptisgbh` を選択
3. 左サイドバーの **「SQL Editor」** をクリック
4. **「New Query」** をクリック
5. `front/complete-cleanup-setup.sql` の内容をコピー&ペーストして実行

### 2. セットアップ完了の確認

実行後、以下のメッセージが表示されることを確認：

```
✅ すべてのユーザーにプロファイルが作成されました！
```

### 3. プロファイル取得の再有効化

セットアップ完了後、以下のコードを修正：

**front/app/auth/login/page.tsx** の 105 行目付近：

```typescript
// 変更前（現在）
console.log("✅ ログイン検出（自動プロファイル取得は無効化中）");
// データベースセットアップ後に有効化: await fetchProfile();

// 変更後（セットアップ完了後）
console.log("✅ ログイン検出 - プロファイル取得開始");
await fetchProfile();
```

### 4. 動作確認

1. ログインページで「プロファイル情報を表示」ボタンをクリック
2. エラーが表示されず、プロファイル情報が正常に表示される
3. 新規登録が正常に動作する

## 📋 チェックリスト

- [ ] Supabase でデータベースセットアップ実行
- [ ] 完了メッセージの確認
- [ ] プロファイル取得の再有効化
- [ ] ログインページでのプロファイル表示テスト
- [ ] 新規登録のテスト

## 🆘 問題が継続する場合

1. Supabase の「Table Editor」で profiles テーブルが作成されているか確認
2. 「Authentication」→「Users」で既存ユーザーを確認
3. ブラウザのコンソールでエラーメッセージを確認
